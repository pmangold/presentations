% maths operators
\DeclareMathOperator{\prox}{prox}
\DeclareMathOperator{\Lap}{Lap}
\DeclareMathOperator{\sign}{sign}

\DeclareMathOperator*{\argmin}{\arg\min}
\DeclareMathOperator*{\argmax}{\arg\max}


\newcommand{\expec}{\mathbb E}
\newcommand{\prob}{\mathbb P}


% commands
\newcommand{\emphcol}[1]{#1}
\newcommand{\emphcolb}[1]{#1}


% letters
\newcommand{\cA}{\mathcal A}
\newcommand{\cH}{\mathcal H}
\newcommand{\cN}{\mathcal N}
\newcommand{\cS}{\mathcal S}
\newcommand{\cW}{\mathcal W}
\newcommand{\cX}{\mathcal X}
\newcommand{\cY}{\mathcal Y}

\newcommand{\bbI}{\mathbb I}

% delimiters
\newcommand{\abs}[1]{| #1 |}
\newcommand{\norm}[1]{\| #1 \|}


% sets
\newcommand{\RR}{\mathbb R}


% annotated eq
\newcounter{mytn}
\makeatletter
\newcommand{\tmn}[3][]{\stepcounter{mytn}%
\tikzmarknode[Col\the\numexpr\value{mytn}-\mytn@start\relax/.try,inner xsep=2pt,%
minimum height=1.6em,inner sep=2mm,#1]{mytn-\number\value{mytn}}{#2}%
\expandafter\gdef\csname tmn@annot@\number\value{mytn}\endcsname{#3}}
\newenvironment{AnnotatedEquation}{\edef\mytn@start{\number\value{mytn}}%
\begin{equation*}}{\end{equation*}%
\edef\mytn@end{\number\value{mytn}}%
\ifnum\mytn@end>\mytn@start
\begin{itemize}
 \foreach \X in {\the\numexpr\mytn@start+1,...,\mytn@end}
 {\item \tikzmarknode{mytn-annot-\X}{\csname tmn@annot@\X\endcsname}%
   \begin{tikzpicture}[overlay,remember picture]
  \draw[-stealth] (mytn-annot-\X.east) to[out=0,in=-90] (mytn-\X.south);
 \end{tikzpicture}}
\end{itemize}
\fi}
\makeatother
\tikzset{ Col1/.style= {fill=blue!20,anchor=base,rounded corners=2pt},
Col2/.style= {Col1, fill=red!20},
Col3/.style= {Col1, fill=green!20},
Col4/.style= {Col1, fill=yellow!20},
}

% for image in the middle
% from https://tex.stackexchange.com/questions/433/vertically-center-text-and-image-in-one-line
\newcommand{\vcenteredinclude}[2][]{\begingroup
\setbox0=\hbox{\includegraphics[#1]{#2}}%
\parbox{\wd0}{\box0}\endgroup}
